<!DOCTYPE html>
<html>
<head>
<title>Vidstan</title>
<meta charset='utf-8'>
<link rel="stylesheet" href="style.css"/>
<script src="phonegap.js"></script>
<script src="jquery.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0" /> 
<script>
document.addEventListener("touchstart", function(){}, true);
</script>
</head>
<body>
<div class="header"><div class="left"><a href="menu.html"><img src="images/menu.png" alt="back"/></a></div><div class="logo"><img src="images/logo.png"/></div><div class="right"><a href="#search" id="search"><img src="images/search.png" alt="search"/></a></div></div></div>

<div class="searchform"><form action="search.html"><input id="focus" type="search" name="q"/> <span class="close"><img src="images/close.png"></span></form></div>
<div class="homeheader"> <h1>Search &amp; Download Videos</h1> <form action="search.html"><input type="search" name="q"/> <input type="image" src="images/searchdark.png" value="submit" name="searched"/></form>

</div>

<div id="loading"><div class="loader"><img src="images/loader.gif"/></div>




<script>
  
  function onDeviceReady() {
    if(typeof FCMPlugin !== "undefined"){
         FCMPlugin.getToken(
              function(token){
                    alert(token);
              }, function(err){
                    alert('error retrieving token: ' + err);
              }
         );
    }
}

document.addEventListener("deviceready", onDeviceReady, false);
  
FCMPlugin.getToken(
  function(token){
    alert(token);
      FCMPlugin.subscribeToTopic('new');

  },
  function(err){
    console.log('error retrieving token: ' + err);
  }
)
    
    
    
    FCMPlugin.onNotification(
  function(data){
    if(data.wasTapped){
      //Notification was received on device tray and tapped by the user. 
      alert( JSON.stringify(data) );
    }else{
      //Notification was received in foreground. Maybe the user needs to be notified. 
      alert( JSON.stringify(data) );
    }
  },
  function(msg){
    console.log('onNotification callback successfully registered: ' + msg);
  },
  function(err){
    console.log('Error registering onNotification callback: ' + err);
  }
);
</script>
</body>
</html>

